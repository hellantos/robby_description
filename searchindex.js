Search.setIndex({"docnames": ["creating-bus-configuration", "creating-control-configuration", "creating-launch-files", "creating-package", "creating-xacro", "index", "prerequisites"], "filenames": ["creating-bus-configuration.rst", "creating-control-configuration.rst", "creating-launch-files.rst", "creating-package.rst", "creating-xacro.rst", "index.rst", "prerequisites.rst"], "titles": ["ROS 2 CANopen bus configuration", "ROS 2 control configuration", "ROS 2 launch files", "ROS 2 configuration package", "ROS 2 robot description", "Building Robby", "Preparing the system"], "terms": {"The": [0, 1, 2, 3, 4], "consist": 0, "multipl": 0, "file": [0, 1, 3, 4, 5], "we": [0, 1, 2, 3, 4, 6], "have": [0, 1, 2, 3, 4, 6], "provid": [0, 1], "creat": [0, 1, 2, 4, 6], "devic": [0, 1, 3], "descript": [0, 2, 3, 5], "ed": [0, 2], "dcf": [0, 1], "ar": [0, 1, 2, 3, 4], "usual": 0, "manufactur": 0, "you": [0, 2, 3, 4], "bui": 0, "drive": [0, 4, 6], "make": [0, 4], "sure": 0, "cia402": 0, "interfac": [0, 2, 3], "otherwis": [0, 1], "stack": [0, 3, 6], "abl": [0, 2, 4], "us": [0, 1, 2, 3, 4, 6], "i": [0, 1, 2, 3, 4, 6], "describ": [0, 3, 4], "your": [0, 2, 3, 4], "robot": [0, 1, 2, 3, 5, 6], "It": [0, 1, 4], "contain": [0, 3], "connect": [0, 4], "detail": 0, "about": [0, 1, 4], "how": [0, 3], "control": [0, 3, 4, 5], "them": [0, 3], "well": [0, 4], "further": 0, "configuraiton": 0, "option": 0, "our": [0, 1, 2, 4, 6], "first": [0, 1, 2, 3, 4, 6], "step": [0, 1, 3, 4], "config": [0, 1, 2], "folder": [0, 1, 4], "packag": [0, 1, 2, 4, 5], "cd": [0, 4, 6], "ros2_w": [0, 2, 4, 6], "src": [0, 3, 4, 6], "my_robot_descript": [0, 2, 3, 4], "mkdir": [0, 2, 4, 6], "p": [0, 6], "robbi": [0, 1, 2, 4], "Then": [0, 2, 4], "go": [0, 3], "copi": [0, 2, 4], "cp": [0, 4], "robby_descript": [0, 1, 2, 4, 6], "tmcm": [0, 2], "1270": [0, 2], "next": [0, 1, 4, 6], "thi": [0, 1, 2, 3, 4, 6], "yaml": [0, 1, 2], "need": [0, 1, 2, 3, 4, 6], "call": [0, 1, 2], "yml": [0, 1], "place": 0, "touch": [0, 1, 4], "simpl": [0, 2, 4, 6], "master": [0, 1, 2, 6], "id": 0, "1": [0, 1, 2, 4], "an": [0, 3, 4], "two": 0, "left": [0, 4], "3": [0, 2, 4], "right": [0, 4], "node_id": [0, 2], "node": [0, 2], "left_driv": [0, 1, 2], "right_driv": [0, 1, 2], "now": [0, 1, 2, 3, 4, 6], "defin": [0, 1], "driver": 0, "should": [0, 2, 4], "standard": 0, "ros2_canopen": [0, 6], "masterdriv": 0, "canopen_master_driv": 0, "default": [0, 1], "cia402driv": 0, "canopen_402_driv": 0, "can": [0, 1, 2, 3, 4, 6], "add": [0, 1, 2, 3, 4], "As": [0, 3], "compil": 0, "time": [0, 4], "machin": 0, "readabl": 0, "path": [0, 1, 6], "dcf_path": 0, "bus_config_path": 0, "bit": 0, "more": [0, 1], "basic": [0, 2], "want": [0, 2], "run": [0, 2, 4], "frequenc": 0, "50": [0, 1], "hz": [0, 1], "profil": 0, "posit": [0, 1], "mode": 0, "veloc": [0, 1, 2], "poll": 0, "true": [0, 1, 2], "period": [0, 2], "20": 0, "position_mod": 0, "velocity_mod": 0, "do": [0, 2, 4, 6], "some": 0, "specif": 0, "base": [0, 4], "execut": [0, 2], "dure": 0, "startup": 0, "preop": 0, "state": [0, 1, 2], "heartbeat_produc": 0, "1000": [0, 2], "heartbeat": 0, "everi": 0, "m": 0, "sdo": 0, "index": [0, 5], "0x2000": 0, "sub_index": 0, "0": [0, 1, 2, 3, 4], "valu": [0, 1], "microstep": 0, "resolut": 0, "8": 0, "per": 0, "0x6081": 0, "1600": 0, "set": [0, 2, 3], "0x6083": 0, "16000": 0, "acceler": [0, 1], "deceler": 0, "0x6085": 0, "quickstop": 0, "For": [0, 1], "work": 0, "effici": 0, "pdo": 0, "At": 0, "least": 0, "follfow": 0, "object": 0, "map": 0, "activ": 0, "subindex": 0, "name": [0, 1, 2, 4], "size": 0, "0x6040": 0, "controlword": 0, "16": 0, "0x6060": 0, "oper": 0, "0x607a": 0, "target": 0, "32": 0, "0x60ff": 0, "0x6041": 0, "statusword": 0, "0x6061": 0, "displai": [0, 4], "0x6064": 0, "actual": [0, 1], "0x606c": 0, "sent": 0, "sync": 0, "messag": 0, "issu": 0, "sync_period": 0, "20000": 0, "tpdo": 0, "enabl": [0, 1], "transmiss": 0, "0x01": 0, "statu": 0, "word": 0, "fals": [0, 1, 2], "4": 0, "rpdo": 0, "stepper": 0, "motor": 0, "200": 0, "revolut": 0, "mean": [0, 2], "unit": 0, "convert": 0, "radian": 0, "To": [0, 2, 4], "x": [0, 1], "pi": 0, "254": 0, "64": 0, "from": [0, 2, 4, 6], "00392": 0, "In": [0, 2, 3, 4, 6], "addit": 0, "wheel": [0, 1, 2, 4], "turn": [0, 4], "opposit": 0, "direct": [0, 2], "adjust": 0, "pass": [0, 4], "scale": 0, "factor": 0, "scale_pos_from_dev": 0, "003926991": 0, "scale_pos_to_dev": 0, "647897079": 0, "scale_vel_from_dev": 0, "scale_vel_to_dev": 0, "complet": 0, "tell": [0, 1, 2, 4], "build": [0, 2, 3, 4, 6], "system": [0, 2, 4, 5], "cmakelist": [0, 2, 3], "txt": [0, 2, 3], "follow": [0, 1, 2, 3, 4], "line": [0, 1, 2, 4], "after": [0, 2, 4], "find_packag": [0, 4], "cogen_dcf": 0, "so": [1, 4], "tool": 1, "done": [1, 3], "anoth": [1, 2, 4], "xacro": [1, 2, 4], "new": [1, 2, 6], "urdf": [1, 2, 4], "past": [1, 2], "content": [1, 2, 3], "xml": [1, 3, 4], "version": [1, 4], "xmln": [1, 4], "http": [1, 4, 6], "www": [1, 4], "org": [1, 4], "wiki": [1, 4], "macro": [1, 4], "robby_control": 1, "param": [1, 4], "prefix": [1, 4], "use_mock_hardwar": [1, 2], "bus_config": 1, "master_config": 1, "can_interface_nam": [1, 2], "master_bin": 1, "type": [1, 2, 3, 4], "unless": 1, "hardwar": [1, 2, 3], "plugin": [1, 2], "canopen_ros2_control": 1, "robotsystem": 1, "mock_compon": [1, 2], "genericsystem": [1, 2], "calculate_dynam": 1, "joint": [1, 2, 4], "left_wheel_joint": [1, 4], "command_interfac": 1, "device_nam": 1, "state_interfac": 1, "right_wheel_joint": [1, 4], "let": [1, 4], "": [1, 4], "check": 1, "paramet": [1, 2, 4], "bu": [1, 2, 3, 4, 5], "gener": 1, "binari": 1, "u": 1, "mock": 1, "level": [1, 2], "here": 1, "which": 1, "canopen": [1, 2, 3, 4, 5, 6], "find": [1, 2, 4], "includ": [1, 2, 3, 4], "test_robot": 1, "arg": [1, 2], "vcan0": [1, 2], "filenam": [1, 4], "link": [1, 2, 4], "world": [1, 4], "parent": [1, 4], "origin": [1, 4], "xyz": [1, 4], "014": [1, 4], "rpy": [1, 4], "57": [1, 4], "joint_state_broadcast": [1, 2, 3], "publish": 1, "joint_stat": 1, "topic": [1, 2], "also": [1, 2], "forward_command_control": [1, 3], "diff_drive_control": [1, 2, 3], "therefor": [1, 2, 4], "controller_manag": [1, 2, 3], "ros__paramet": 1, "update_r": 1, "jointstatebroadcast": 1, "robby_base_control": [1, 2], "diffdrivecontrol": 1, "robby_forward_control": [1, 2], "forwardcommandcontrol": 1, "straight": 1, "forward": 1, "left_wheel": 1, "right_wheel": 1, "interface_nam": 1, "complex": 1, "mani": 1, "thing": 1, "left_wheel_nam": 1, "right_wheel_nam": 1, "wheel_separ": 1, "24": 1, "wheels_per_sid": 1, "both": [1, 2], "signal": 1, "wheel_radiu": 1, "035": 1, "wheel_separation_multipli": 1, "left_wheel_radius_multipli": 1, "right_wheel_radius_multipli": 1, "publish_r": 1, "odom_frame_id": 1, "base_frame_id": 1, "base_link": [1, 4], "pose_covariance_diagon": 1, "001": 1, "01": 1, "twist_covariance_diagon": 1, "open_loop": 1, "enable_odom_tf": 1, "cmd_vel_timeout": 1, "5": 1, "publish_limited_veloc": 1, "use_stamped_vel": 1, "velocity_rolling_window_s": 1, "10": [1, 2], "limit": 1, "whenev": 1, "min_": 1, "unspecifi": 1, "max_": 1, "linear": 1, "has_velocity_limit": 1, "has_acceleration_limit": 1, "has_jerk_limit": 1, "max_veloc": 1, "min_veloc": 1, "max_acceler": 1, "max_jerk": 1, "min_jerk": 1, "angular": 1, "z": 1, "min_acceler": 1, "onli": [1, 2], "write": [1, 2], "launch": [1, 3, 4, 5], "three": [2, 4], "fake": 2, "real": 2, "diff": 2, "directori": [2, 3, 4], "instal": [2, 4, 6], "section": 2, "start": [2, 3], "veri": [2, 4], "rviz": [2, 4], "robot_state_publish": [2, 3], "trick": 2, "control_simul": 2, "py": [2, 4], "import": [2, 4], "launchdescript": 2, "action": 2, "declarelaunchargu": 2, "registereventhandl": 2, "condit": 2, "ifcondit": 2, "event_handl": 2, "onprocessexit": 2, "substitut": 2, "command": [2, 3, 4], "findexecut": 2, "pathjoinsubstitut": 2, "launchconfigur": 2, "launch_ro": 2, "findpackageshar": 2, "def": 2, "generate_launch_descript": 2, "declar": 2, "argument": 2, "declared_argu": 2, "initi": 2, "gui": 2, "load": 2, "robot_description_cont": 2, "robot_descript": 2, "configur": [2, 4, 5], "robot_control": 2, "ros2_control": 2, "control_nod": 2, "ros2_control_nod": 2, "output": 2, "robot_state_pub_nod": 2, "remap": 2, "cmd_vel_unstamp": 2, "cmd_vel": 2, "rviz_nod": 2, "rviz2": [2, 3], "log": 2, "spawn": 2, "broadcast": 2, "joint_state_broadcaster_spawn": 2, "spawner": 2, "manag": 2, "robot_controller_spawn": 2, "delai": 2, "delay_rviz_after_joint_state_broadcaster_spawn": 2, "target_act": 2, "on_exit": 2, "delay_robot_controller_spawner_after_joint_state_broadcaster_spawn": 2, "keyboard_teleop": 2, "return": 2, "colcon": [2, 4, 6], "select": [2, 4], "ros2": [2, 3, 4], "open": 2, "termin": 2, "sourc": [2, 4, 6], "workspac": [2, 4, 6], "opt": [2, 6], "roll": [2, 6], "setup": [2, 4, 6], "bash": [2, 6], "keyboard": 2, "teleop_twist_keyboard": 2, "see": 2, "move": 2, "howev": 2, "doe": 2, "commun": 2, "help": 2, "valid": 2, "either": 2, "slave": 2, "device_contain": 2, "fake_left_dr": 2, "fake_right_dr": 2, "code": 2, "forward_control": 2, "timeract": 2, "includelaunchdescript": 2, "launch_description_sourc": 2, "pythonlaunchdescriptionsourc": 2, "unlesscondit": 2, "arg_use_real_hardwar": 2, "use_real_hardwar": 2, "default_valu": 2, "arg_can_interface_nam": 2, "robot_control_config": 2, "screen": 2, "robot_state_publisher_nod": 2, "slave_config": 2, "slave_launch": 2, "canopen_fake_slav": 2, "cia402_slav": 2, "slave_node_1": 2, "launch_argu": 2, "node_nam": 2, "item": 2, "slave_node_2": 2, "handl": 2, "sequenc": 2, "delay_master_launch": 2, "delay_slave_launch": 2, "nodes_to_start": 2, "If": 2, "virtual": 2, "sudo": 2, "modprob": 2, "vcan": 2, "ip": 2, "dev": 2, "txqueuelen": 2, "up": 2, "forward_command": 2, "send": 2, "pub": 2, "std_msg": 2, "msg": 2, "float64multiarrai": 2, "data": 2, "order": [2, 3, 6], "diff_driv": 2, "chang": 2, "cang": 2, "all": [2, 3, 6], "r": [2, 3, 6], "requir": 3, "necessari": 3, "chapter": [3, 4], "teach": 3, "explain": 3, "individu": 3, "pkg": 3, "ament_cmak": 3, "depend": 3, "lely_core_librari": 3, "licens": 3, "apach": 3, "remov": 3, "rm": 3, "did": 3, "extens": 3, "analysi": 3, "discov": 3, "miss": 3, "ones": 3, "experi": 4, "differenti": [4, 6], "caster": 4, "scrap": 4, "model": 4, "That": 4, "end": 4, "look": 4, "like": 4, "mesh": 4, "over": 4, "class": [4, 6], "empti": 4, "case": 4, "thei": 4, "continu": 4, "fix": 4, "transform": 4, "left_wheel_link": 4, "right_wheel_link": 4, "base_joint": 4, "insert_block": 4, "child": 4, "tree": 4, "visual": 4, "due": 4, "wai": 4, "compon": 4, "coupl": 4, "geometri": 4, "dae": 4, "14": 4, "05": 4, "12": 4, "021": 4, "axi": 4, "locat": 4, "respect": 4, "wwith": 4, "repres": 4, "instanti": 4, "final": 4, "cmake": 4, "routin": 4, "destin": 4, "share": 4, "project_nam": 4, "clone": [4, 6], "urdf_launch": 4, "github": [4, 6], "com": [4, 6], "git": [4, 6], "urdf_packag": 4, "urdf_package_path": 4, "prepar": 5, "ro": [5, 6], "2": [5, 6], "modul": 5, "search": 5, "page": 5, "mobil": 6, "project": 6, "industri": 6, "ipa": 6, "cmh": 6, "rosdep": 6, "updat": 6, "ignor": 6, "y": 6}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"ro": [0, 1, 2, 3, 4], "2": [0, 1, 2, 3, 4], "canopen": 0, "bu": 0, "configur": [0, 1, 3], "control": [1, 2], "system": [1, 6], "interfac": 1, "ros2_control": 1, "launch": 2, "file": 2, "simul": 2, "forward": 2, "differenti": 2, "drive": 2, "packag": 3, "creat": 3, "new": 3, "robot": 4, "descript": 4, "build": 5, "robbi": 5, "content": 5, "indic": 5, "tabl": 5, "prepar": 6}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 60}, "alltitles": {"ROS 2 CANopen bus configuration": [[0, "ros-2-canopen-bus-configuration"]], "ROS 2 control configuration": [[1, "ros-2-control-configuration"]], "System interface (ros2_control)": [[1, "system-interface-ros2-control"]], "Controllers": [[1, "controllers"]], "ROS 2 launch files": [[2, "ros-2-launch-files"]], "Launch control simulation": [[2, "launch-control-simulation"]], "Launch forward controller": [[2, "launch-forward-controller"]], "Launch differential drive controller": [[2, "launch-differential-drive-controller"]], "ROS 2 configuration package": [[3, "ros-2-configuration-package"]], "Creating a new package": [[3, "creating-a-new-package"]], "ROS 2 robot description": [[4, "ros-2-robot-description"]], "Building Robby": [[5, "building-robby"]], "Contents:": [[5, null]], "Indices and tables": [[5, "indices-and-tables"]], "Preparing the system": [[6, "preparing-the-system"]]}, "indexentries": {}})